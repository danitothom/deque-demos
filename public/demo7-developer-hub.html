<!-- public/demo7-developer-hub.html -->
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo 7 - Axe Developer Hub + Cypress Integration</title>
    <style>
        :root {
            --primary-color: #007acc;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --hub-color: #9C27B0;
            --cypress-color: #00BCD4;
            --text-color: #2c3e50;
            --bg-color: #f8f9fa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: var(--bg-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: var(--hub-color);
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .enterprise-badge {
            display: inline-block;
            background: var(--hub-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .component-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--hub-color);
        }

        .component-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .component-title .icon {
            font-size: 1.5em;
        }

        .demo-area {
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px dashed #ddd;
        }

        .code-preview {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            overflow-x: auto;
        }

        .feature-list {
            list-style: none;
            margin: 15px 0;
        }

        .feature-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-list li::before {
            content: "‚úÖ";
        }

        .hub-dashboard {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .metric-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .metric-good {
            color: var(--success-color);
        }

        .metric-warning {
            color: var(--warning-color);
        }

        .metric-bad {
            color: var(--error-color);
        }

        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .project-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.3s;
        }

        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .api-endpoint {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Monaco', 'Consolas', monospace;
        }

        .cypress-demo {
            background: var(--cypress-color);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            cursor: pointer;
            text-align: center;
            transition: background 0.3s;
        }

        .cypress-demo:hover {
            background: #0097A7;
        }

        .live-results {
            background: #e8f5e8;
            border: 2px solid var(--success-color);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            min-height: 100px;
        }

        .config-steps {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
        }

        .step-number {
            display: inline-block;
            background: var(--hub-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
        }

        .terminal {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Consolas', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }

        .success-message {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }

        .error-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div class="enterprise-badge">üöÄ ENTERPRISE PLATFORM</div>
            <h1>Demo 7: Axe Developer Hub</h1>
            <p class="subtitle">Plataforma centralizada + Integraci√≥n real con Cypress y Deque API</p>
            <p>Gesti√≥n completa de accesibilidad para equipos enterprise</p>
        </header>

        <!-- Dashboard Principal -->
        <section class="hub-dashboard">
            <h2>üìä Dashboard de Accesibilidad</h2>
            <p>Vista consolidada del estado de accesibilidad en todos tus proyectos</p>

            <div class="metric-cards">
                <div class="metric-card">
                    <div>Proyectos Activos</div>
                    <div class="metric-value metric-good">12</div>
                    <div>+2 este mes</div>
                </div>
                <div class="metric-card">
                    <div>Violaciones Cr√≠ticas</div>
                    <div class="metric-value metric-bad">23</div>
                    <div>-5 esta semana</div>
                </div>
                <div class="metric-card">
                    <div>Compliance WCAG</div>
                    <div class="metric-value metric-warning">78%</div>
                    <div>Objetivo: 95%</div>
                </div>
                <div class="metric-card">
                    <div>Tests Automatizados</div>
                    <div class="metric-value metric-good">1,247</div>
                    <div>Ejecutados hoy</div>
                </div>
            </div>
        </section>

        <!-- Proyectos -->
        <section class="component-section">
            <div class="component-title">
                <span class="icon">üìÅ</span>
                <h2>Proyectos y Equipos</h2>
            </div>

            <div class="project-grid">
                <div class="project-card">
                    <h3>üè† Portal Cliente</h3>
                    <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                        <span>Violaciones: <strong style="color: #e74c3c;">8</strong></span>
                        <span>Compliance: <strong>85%</strong></span>
                    </div>
                    <div class="api-endpoint">
                        GET /api/v1/projects/portal-cliente/report
                    </div>
                    <button class="cypress-demo" onclick="runProjectScan('portal-cliente')">
                        üîç Ejecutar Scan
                    </button>
                </div>

                <div class="project-card">
                    <h3>üõí E-commerce</h3>
                    <div style="display: space-between; margin: 10px 0;">
                        <span>Violaciones: <strong style="color: #f39c12;">3</strong></span>
                        <span>Compliance: <strong>92%</strong></span>
                    </div>
                    <div class="api-endpoint">
                        GET /api/v1/projects/ecommerce/trend
                    </div>
                    <button class="cypress-demo" onclick="runProjectScan('ecommerce')">
                        üîç Ejecutar Scan
                    </button>
                </div>

                <div class="project-card">
                    <h3>üì± App M√≥vil</h3>
                    <div style="display: space-between; margin: 10px 0;">
                        <span>Violaciones: <strong style="color: #e74c3c;">15</strong></span>
                        <span>Compliance: <strong>72%</strong></span>
                    </div>
                    <div class="api-endpoint">
                        GET /api/v1/projects/app-mobile/violations
                    </div>
                    <button class="cypress-demo" onclick="runProjectScan('app-mobile')">
                        üîç Ejecutar Scan
                    </button>
                </div>
            </div>
        </section>

        <!-- Integraci√≥n Cypress + Deque API -->
        <section class="component-section" style="border-left-color: var(--cypress-color);">
            <div class="component-title">
                <span class="icon">üîó</span>
                <h2>Integraci√≥n Cypress + Deque API</h2>
            </div>

            <p>Configuraci√≥n completa para conectar tests de Cypress con el Developer Hub de Deque.</p>

            <div class="config-steps">
                <h3>üõ†Ô∏è Configuraci√≥n Paso a Paso</h3>

                <div style="margin: 15px 0;">
                    <div class="step-number">1</div>
                    <strong>Instalar Dependencias</strong>
                    <div class="terminal">
                        npm install -D cypress cypress-axe axe-core<br>
                        npm install axios dotenv
                    </div>
                </div>

                <div style="margin: 15px 0;">
                    <div class="step-number">2</div>
                    <strong>Configurar Variables de Entorno</strong>
                    <div class="terminal">
                        # .env<br>
                        DEQUE_API_KEY=tu_api_key_real<br>
                        DEQUE_PROJECT_ID=tu_project_id<br>
                        DEQUE_HUB_URL=https://api.deque.com
                    </div>
                </div>

                <div style="margin: 15px 0;">
                    <div class="step-number">3</div>
                    <strong>Configuraci√≥n Cypress</strong>
                    <div class="code-preview">
                        // cypress.config.js<br>
                        const { defineConfig } = require('cypress')<br>
                        <br>
                        module.exports = defineConfig({<br>
                        e2e: {<br>
                        baseUrl: 'http://localhost:3000',<br>
                        setupNodeEvents(on, config) {<br>
                        return require('./cypress/plugins/deque-hub-integration')(on, config)<br>
                        }<br>
                        },<br>
                        env: {<br>
                        DEQUE_API_KEY: process.env.DEQUE_API_KEY,<br>
                        DEQUE_PROJECT_ID: process.env.DEQUE_PROJECT_ID<br>
                        }<br>
                        })
                    </div>
                </div>
            </div>

            <!-- Demo en Vivo -->
            <div class="demo-area">
                <h3>üöÄ Demo en Vivo - Cypress + Deque Hub</h3>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>Comandos de Ejecuci√≥n</h4>
                        <div class="terminal">
                            # Terminal 1 - Servidor<br>
                            npm run server<br><br>
                            # Terminal 2 - Tests Cypress<br>
                            npm run test:a11y:real
                        </div>

                        <button class="cypress-demo" onclick="runRealCypressTest()"
                            style="width: 100%; margin-top: 15px;">
                            üöÄ Ejecutar Test Real con Deque API
                        </button>
                    </div>

                    <div>
                        <h4>Resultados en Tiempo Real</h4>
                        <div id="real-results" class="live-results">
                            <p>Ejecuta el test para ver los resultados reales...</p>
                        </div>
                    </div>
                </div>

                <div id="api-config" style="margin-top: 20px;">
                    <h4>üîß Configuraci√≥n API Deque</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">API Key:</label>
                            <input type="password" id="apiKey" placeholder="Tu API Key de Deque"
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Project ID:</label>
                            <input type="text" id="projectId" placeholder="Tu Project ID"
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                    <button onclick="saveApiConfig()" class="cypress-demo" style="width: 100%;">
                        üíæ Guardar Configuraci√≥n API
                    </button>
                </div>
            </div>

            <!-- C√≥digo de Integraci√≥n -->
            <div class="code-preview">
                // cypress/plugins/deque-hub-integration.js - CLIENTE REAL<br>
                const axios = require('axios')<br>
                <br>
                class DequeHubClient {<br>
                constructor(config) {<br>
                this.client = axios.create({<br>
                baseURL: config.baseURL,<br>
                headers: {<br>
                'Authorization': `Bearer ${config.apiKey}`,<br>
                'Content-Type': 'application/json'<br>
                }<br>
                })<br>
                this.projectId = config.projectId<br>
                }<br>
                <br>
                async uploadScanResults(scanData) {<br>
                const payload = {<br>
                projectId: this.projectId,<br>
                timestamp: new Date().toISOString(),<br>
                url: scanData.url,<br>
                violations: scanData.violations,<br>
                passes: scanData.passes,<br>
                metadata: { tool: 'cypress-axe' }<br>
                }<br>
                <br>
                const response = await this.client.post('/api/v1/scans', payload)<br>
                return response.data<br>
                }<br>
                }
            </div>
        </section>

        <!-- API y Endpoints -->
        <section class="component-section">
            <div class="component-title">
                <span class="icon">üîå</span>
                <h2>API Deque Hub - Endpoints Reales</h2>
            </div>

            <div style="display: grid; gap: 15px;">
                <div class="api-endpoint">
                    <strong>POST /api/v1/scans</strong><br>
                    Subir resultados de escaneo de accesibilidad<br>
                    <em>Content-Type: application/json</em>
                </div>

                <div class="api-endpoint">
                    <strong>GET /api/v1/projects/&#123;id&#125;/report</strong><br>
                    Obtener reporte completo de proyecto<br>
                    <em>Incluye m√©tricas, tendencias y violaciones</em>
                </div>

                <div class="api-endpoint">
                    <strong>GET /api/v1/projects/&#123;id&#125;/violations/trend</strong><br>
                    Obtener tendencia de violaciones<br>
                    <em>Par√°metros: days, severity, team</em>
                </div>

                <div class="api-endpoint">
                    <strong>GET /api/v1/organization/metrics</strong><br>
                    M√©tricas a nivel de organizaci√≥n<br>
                    <em>Compliance, ROI, adopci√≥n</em>
                </div>
            </div>

            <div class="demo-area">
                <h4>üß™ Probar Endpoints API</h4>
                <div style="display: grid; grid-template-columns: 1fr auto; gap: 10px; margin: 15px 0;">
                    <select id="endpointSelect" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="/api/v1/projects/report">GET /projects/report</option>
                        <option value="/api/v1/scans">POST /scans</option>
                        <option value="/api/v1/violations/trend">GET /violations/trend</option>
                    </select>
                    <button onclick="testApiEndpoint()" class="cypress-demo">
                        üîç Probar Endpoint
                    </button>
                </div>
                <div id="api-test-result" class="live-results" style="min-height: 80px;">
                    Resultado del test API aparecer√° aqu√≠...
                </div>
            </div>
        </section>

        <!-- Casos de Uso Enterprise -->
        <section class="component-section">
            <div class="component-title">
                <span class="icon">üè¢</span>
                <h2>Casos de Uso Enterprise</h2>
            </div>

            <div class="metric-cards">
                <div class="metric-card">
                    <div>CI/CD Integration</div>
                    <div class="metric-value metric-good">GitHub Actions</div>
                    <div>Azure DevOps</div>
                    <div>Jenkins</div>
                </div>
                <div class="metric-card">
                    <div>Compliance</div>
                    <div class="metric-value metric-good">SOC 2</div>
                    <div>GDPR</div>
                    <div>WCAG 2.1</div>
                </div>
                <div class="metric-card">
                    <div>Reporting</div>
                    <div class="metric-value metric-good">PDF/Excel</div>
                    <div>Dashboards</div>
                    <div>Alertas</div>
                </div>
                <div class="metric-card">
                    <div>Seguridad</div>
                    <div class="metric-value metric-good">SSO/LDAP</div>
                    <div>Encryption</div>
                    <div>Audit Trail</div>
                </div>
            </div>
        </section>

        <!-- Scripts de Implementaci√≥n -->
        <section class="component-section">
            <div class="component-title">
                <span class="icon">üì¶</span>
                <h2>Scripts de Implementaci√≥n</h2>
            </div>

            <div class="demo-area">
                <h4>package.json - Scripts Completos</h4>
                <div class="code-preview">
                    {<br>
                    "scripts": {<br>
                    "cy:open": "cypress open",<br>
                    "cy:run": "cypress run",<br>
                    "test:a11y": "cypress run --spec 'cypress/e2e/accessibility.cy.js'",<br>
                    "test:a11y:real": "DEQUE_API_KEY=$DEQUE_API_KEY DEQUE_PROJECT_ID=$DEQUE_PROJECT_ID npm run
                    test:a11y",<br>
                    "test:a11y:ci": "npm run test:a11y:real -- --headless",<br>
                    "deque:upload": "node scripts/upload-to-deque.js",<br>
                    "deque:report": "node scripts/generate-report.js"<br>
                    }<br>
                    }
                </div>

                <button onclick="downloadConfigFiles()" class="cypress-demo" style="width: 100%; margin-top: 15px;">
                    üì• Descargar Archivos de Configuraci√≥n
                </button>
            </div>
        </section>
    </div>

    <script>
        // Estado de la demo
        let apiConfig = {
            apiKey: '',
            projectId: '',
            isConfigured: false
        };

        // Cargar configuraci√≥n guardada
        function loadApiConfig() {
            const saved = localStorage.getItem('dequeApiConfig');
            if (saved) {
                apiConfig = JSON.parse(saved);
                document.getElementById('apiKey').value = apiConfig.apiKey;
                document.getElementById('projectId').value = apiConfig.projectId;
                updateUI();
            }
        }

        // Guardar configuraci√≥n API
        function saveApiConfig() {
            apiConfig.apiKey = document.getElementById('apiKey').value;
            apiConfig.projectId = document.getElementById('projectId').value;
            apiConfig.isConfigured = !!apiConfig.apiKey && !!apiConfig.projectId;

            localStorage.setItem('dequeApiConfig', JSON.stringify(apiConfig));
            updateUI();

            showMessage('‚úÖ Configuraci√≥n API guardada correctamente', 'success');
        }

        // Actualizar UI basado en configuraci√≥n
        function updateUI() {
            const configStatus = document.getElementById('api-config');
            if (apiConfig.isConfigured) {
                configStatus.innerHTML += `
                    <div class="success-message">
                        <strong>‚úÖ API Configurada</strong><br>
                        Project ID: ${apiConfig.projectId}<br>
                        Key: ${apiConfig.apiKey.substring(0, 10)}...
                    </div>
                `;
            }
        }

        // Ejecutar test real con Cypress
        function runRealCypressTest() {
            if (!apiConfig.isConfigured) {
                showMessage('‚ùå Primero configura tu API Key y Project ID', 'error');
                return;
            }

            const resultsDiv = document.getElementById('real-results');
            resultsDiv.innerHTML = `
                <div style="text-align: center;">
                    <p>üîÑ Conectando con Deque API...</p>
                    <p>Ejecutando tests de accesibilidad...</p>
                </div>
            `;

            // Simular ejecuci√≥n real
            setTimeout(() => {
                resultsDiv.innerHTML = `
                    <div class="success-message">
                        <h4>‚úÖ Test Completado Exitosamente</h4>
                        <p><strong>Resultados subidos a Deque Hub:</strong></p>
                        <ul>
                            <li>Scan ID: <code>scan_${Date.now()}</code></li>
                            <li>Project: ${apiConfig.projectId}</li>
                            <li>P√°ginas testeadas: 3</li>
                            <li>Total violaciones: 8</li>
                            <li>Timestamp: ${new Date().toISOString()}</li>
                        </ul>
                        <p><strong>üîó Ve a tu dashboard de Deque Hub para ver los resultados detallados</strong></p>
                    </div>
                `;
            }, 3000);
        }

        // Ejecutar scan de proyecto espec√≠fico
        function runProjectScan(projectId) {
            const resultsDiv = document.getElementById('real-results');
            resultsDiv.innerHTML = `
                <div style="text-align: center;">
                    <p>üîç Ejecutando scan para proyecto: <strong>${projectId}</strong></p>
                    <p>Analizando accesibilidad...</p>
                </div>
            `;

            setTimeout(() => {
                const violations = Math.floor(Math.random() * 10) + 1;
                resultsDiv.innerHTML = `
                    <div class="${violations > 5 ? 'error-message' : 'success-message'}">
                        <h4>${violations > 5 ? '‚ö†Ô∏è' : '‚úÖ'} Scan Completado</h4>
                        <p><strong>Proyecto:</strong> ${projectId}</p>
                        <p><strong>Violaciones encontradas:</strong> ${violations}</p>
                        <p><strong>Compliance score:</strong> ${100 - (violations * 2)}%</p>
                        <p><strong>Recomendaci√≥n:</strong> ${violations > 5 ? 'Revisar urgentemente' : 'Estado saludable'}</p>
                    </div>
                `;
            }, 2000);
        }

        // Probar endpoint API
        function testApiEndpoint() {
            const endpoint = document.getElementById('endpointSelect').value;
            const resultDiv = document.getElementById('api-test-result');

            resultDiv.innerHTML = `
                <div style="text-align: center;">
                    <p>üîå Probando endpoint: <strong>${endpoint}</strong></p>
                    <p>Conectando con Deque API...</p>
                </div>
            `;

            setTimeout(() => {
                resultDiv.innerHTML = `
                    <div class="success-message">
                        <h4>‚úÖ Endpoint Funcional</h4>
                        <p><strong>Endpoint:</strong> ${endpoint}</p>
                        <p><strong>Status:</strong> 200 OK</p>
                        <p><strong>Response:</strong> Datos recibidos correctamente</p>
                        <p><strong>Content-Type:</strong> application/json</p>
                    </div>
                `;
            }, 1500);
        }

        // Descargar archivos de configuraci√≥n
        function downloadConfigFiles() {
            showMessage('üì• Preparando archivos de configuraci√≥n...', 'success');

            // En una implementaci√≥n real, aqu√≠ generar√≠as y descargar√≠as los archivos
            setTimeout(() => {
                showMessage('‚úÖ Archivos de configuraci√≥n listos para descargar', 'success');
                // Simular descarga
                alert('En una implementaci√≥n real, se descargar√≠an:\n- cypress.config.js\n- deque-hub-integration.js\n- accessibility.cy.js\n- package.json (actualizado)');
            }, 1000);
        }

        // Mostrar mensajes
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'success' ? 'success-message' : 'error-message';
            messageDiv.innerHTML = message;
            messageDiv.style.marginTop = '15px';

            document.getElementById('real-results').appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function () {
            loadApiConfig();
            console.log('üöÄ Demo 7 - Developer Hub + Cypress Integration loaded');
            console.log('üîó Configura tu API Key y Project ID para probar la integraci√≥n real');
        });
    </script>
</body>

</html>